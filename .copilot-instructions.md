# OFITEC.AI - GITHUB COPILOT INSTRUCTIONS
## Configuración Avanzada para el Proyecto

### 🚀 COMANDOS AUTO-APROBADOS

Los siguientes comandos pueden ejecutarse automáticamente sin solicitar aprobación:

#### **Comandos de Desarrollo**
- `npm run dev` - Iniciar servidor de desarrollo frontend
- `npm run build` - Construir aplicación para producción
- `npm run lint` - Ejecutar linter
- `npm run test` - Ejecutar tests
- `npm run type-check` - Verificar tipos TypeScript
- `npm install` - Instalar dependencias
- `npm update` - Actualizar dependencias

#### **Comandos Python/Backend**
- `python -m pytest` - Ejecutar tests de Python
- `python -m flake8` - Linter de Python
- `python -m black .` - Formatear código Python
- `pip install -r requirements.txt` - Instalar dependencias Python
- `python server.py` - Iniciar servidor backend

#### **Comandos Docker**
- `docker compose up -d` - Iniciar contenedores en background
- `docker compose down` - Detener contenedores
- `docker compose build` - Construir imágenes
- `docker compose logs` - Ver logs de contenedores
- `docker compose ps` - Estado de contenedores
- `docker compose restart` - Reiniciar servicios

#### **Comandos Git (Safe)**
- `git status` - Ver estado del repositorio
- `git diff` - Ver diferencias
- `git log --oneline -10` - Ver historial corto
- `git branch` - Ver ramas
- `git fetch` - Actualizar referencias remotas
- `git add .` - Stagear cambios
- `git commit -m "message"` - Commit con mensaje

#### **Comandos de Sistema**
- `ls` / `dir` - Listar archivos
- `pwd` / `cd` - Navegación de directorios
- `cat` / `type` - Ver contenido de archivos
- `grep` / `findstr` - Buscar en archivos
- `find` / `where` - Buscar archivos
- `curl` - Hacer requests HTTP
- `wget` - Descargar archivos

#### **Comandos de Base de Datos**
- `sqlite3 data/chipax_data.db ".tables"` - Ver tablas
- `sqlite3 data/chipax_data.db ".schema"` - Ver esquema
- `sqlite3 data/chipax_data.db "PRAGMA integrity_check"` - Verificar integridad

#### **Tasks del Proyecto**
- Task: `Rebuild backend and frontend containers`
- Task: `smoke: sc_ep`
- Task: `dev: rebuild + smoke`
- Task: `AR: Promote rules (DryRun)`
- Task: `smoke: ar_auto_assign`

---

### ⚙️ RESTRICCIONES FLEXIBILIZADAS

#### **Comandos que Requieren Confirmación**
- Comandos destructivos: `rm`, `del`, `DROP TABLE`, `DELETE FROM`
- Comandos de red externa: `npm publish`, `pip upload`
- Comandos de sistema críticos: `sudo`, `chmod 777`, `format`
- Git destructivos: `git reset --hard`, `git push --force`, `git branch -D`

#### **Comandos Completamente Bloqueados**
- `rm -rf /` o equivalentes destructivos del sistema
- `format c:` o comandos de formateo de disco
- `shutdown`, `reboot` sin contexto apropiado
- Instalación de software del sistema sin contexto

---

### 🎯 PREFERENCIAS DE DESARROLLO

#### **Frameworks y Librerías Permitidas**
- **Frontend**: Next.js 15, React 18+, TypeScript, Tailwind CSS
- **Backend**: Flask, SQLAlchemy, pandas, numpy, prometheus_client
- **Base de Datos**: SQLite (principal), PostgreSQL (futuro)
- **Testing**: Jest, pytest, supertest
- **Deployment**: Docker, Docker Compose

#### **Patrones de Código Preferidos**
- **TypeScript Strict Mode**: Siempre habilitado
- **Error Boundaries**: Usar en componentes React críticos
- **API Response Types**: Interfaces tipadas para todas las responses
- **Database Queries**: Context managers para conexiones
- **Logging**: Structured logging con niveles apropiados

#### **Arquitectura del Proyecto**
- **Frontend Port**: 3001 (Ley de Puertos)
- **Backend Port**: 5555 (Ley de Puertos)
- **Database**: SQLite en `data/chipax_data.db` (DB Canónica)
- **Modular Structure**: Preferir módulos < 500 líneas
- **Type Safety**: Tipado completo en TypeScript y Python

---

### 🔧 CONFIGURACIÓN DE HERRAMIENTAS

#### **Linting y Formatting**
- **ESLint**: Configuración Next.js + Prettier
- **Flake8**: Máximo 88 caracteres por línea
- **Black**: Formatter automático para Python
- **Prettier**: Formatter para JS/TS/CSS

#### **Testing Requirements**
- **Cobertura mínima**: 70% para backend
- **Tests obligatorios**: APIs críticas, utilidades DB, validaciones
- **Smoke tests**: Ejecutar después de cambios mayores

#### **Commits y Branches**
- **Commit format**: Conventional commits preferidos
- **Branch naming**: `feature/`, `bugfix/`, `refactor/`
- **PR Requirements**: Tests passing, no lint errors

---

### 🚨 CONTEXTO DEL PROYECTO

#### **Estado Actual**
- **Servidor monolítico**: server.py en proceso de refactorización
- **Módulos extraídos**: config.py, rate_limiting.py, db_utils_centralized.py, ai_jobs.py
- **Frontend**: Next.js 15 con TypeScript
- **Base de datos**: SQLite con ~50 tablas
- **Contenedores**: Docker Compose para desarrollo

#### **Prioridades de Desarrollo**
1. **FASE 1 COMPLETADA**: Extracción de módulos core de server.py
2. **FASE 2 EN CURSO**: APIs especializadas y servicios
3. **FASE 3 PLANIFICADA**: Servicios de dominio
4. **Testing**: Mantener cobertura > 70%
5. **Performance**: Optimización de queries DB

#### **Reglas del Negocio**
- **Ley de Puertos**: Frontend 3001, Backend 5555
- **DB Canónica**: Una sola fuente de verdad en SQLite
- **Modularidad**: Archivos < 500 líneas
- **Observabilidad**: Prometheus metrics habilitadas

---

### 💡 SUGERENCIAS INTELIGENTES

#### **Auto-Completions Habilitados Para**
- Imports de módulos del proyecto
- Funciones de utilidades comunes
- Patterns de API responses
- Database query patterns
- React component patterns
- Docker commands comunes

#### **Context Awareness**
- Detectar automáticamente el stack tecnológico
- Sugerir imports relevantes al contexto
- Proponer patrones de error handling
- Recomendar optimizaciones de performance

---

*🤖 Configuración optimizada para máxima productividad con seguridad apropiada*