# OFITEC.AI - GITHUB COPILOT INSTRUCTIONS
## Configuraci贸n Avanzada para el Proyecto

###  COMANDOS AUTO-APROBADOS

Los siguientes comandos pueden ejecutarse autom谩ticamente sin solicitar aprobaci贸n:

#### **Comandos de Desarrollo**
- `npm run dev` - Iniciar servidor de desarrollo frontend
- `npm run build` - Construir aplicaci贸n para producci贸n
- `npm run lint` - Ejecutar linter
- `npm run test` - Ejecutar tests
- `npm run type-check` - Verificar tipos TypeScript
- `npm install` - Instalar dependencias
- `npm update` - Actualizar dependencias

#### **Comandos Python/Backend**
- `python -m pytest` - Ejecutar tests de Python
- `python -m flake8` - Linter de Python
- `python -m black .` - Formatear c贸digo Python
- `pip install -r requirements.txt` - Instalar dependencias Python
- `python server.py` - Iniciar servidor backend

#### **Comandos Docker**
- `docker compose up -d` - Iniciar contenedores en background
- `docker compose down` - Detener contenedores
- `docker compose build` - Construir im谩genes
- `docker compose logs` - Ver logs de contenedores
- `docker compose ps` - Estado de contenedores
- `docker compose restart` - Reiniciar servicios

#### **Comandos Git (Safe)**
- `git status` - Ver estado del repositorio
- `git diff` - Ver diferencias
- `git log --oneline -10` - Ver historial corto
- `git branch` - Ver ramas
- `git fetch` - Actualizar referencias remotas
- `git add .` - Stagear cambios
- `git commit -m "message"` - Commit con mensaje

#### **Comandos de Sistema**
- `ls` / `dir` - Listar archivos
- `pwd` / `cd` - Navegaci贸n de directorios
- `cat` / `type` - Ver contenido de archivos
- `grep` / `findstr` - Buscar en archivos
- `find` / `where` - Buscar archivos
- `curl` - Hacer requests HTTP
- `wget` - Descargar archivos

#### **Comandos de Base de Datos**
- `sqlite3 data/chipax_data.db ".tables"` - Ver tablas
- `sqlite3 data/chipax_data.db ".schema"` - Ver esquema
- `sqlite3 data/chipax_data.db "PRAGMA integrity_check"` - Verificar integridad

#### **Tasks del Proyecto**
- Task: `Rebuild backend and frontend containers`
- Task: `smoke: sc_ep`
- Task: `dev: rebuild + smoke`
- Task: `AR: Promote rules (DryRun)`
- Task: `smoke: ar_auto_assign`

---

### 锔 RESTRICCIONES FLEXIBILIZADAS

#### **Comandos que Requieren Confirmaci贸n**
- Comandos destructivos: `rm`, `del`, `DROP TABLE`, `DELETE FROM`
- Comandos de red externa: `npm publish`, `pip upload`
- Comandos de sistema cr铆ticos: `sudo`, `chmod 777`, `format`
- Git destructivos: `git reset --hard`, `git push --force`, `git branch -D`

#### **Comandos Completamente Bloqueados**
- `rm -rf /` o equivalentes destructivos del sistema
- `format c:` o comandos de formateo de disco
- `shutdown`, `reboot` sin contexto apropiado
- Instalaci贸n de software del sistema sin contexto

---

###  PREFERENCIAS DE DESARROLLO

#### **Frameworks y Librer铆as Permitidas**
- **Frontend**: Next.js 15, React 18+, TypeScript, Tailwind CSS
- **Backend**: Flask, SQLAlchemy, pandas, numpy, prometheus_client
- **Base de Datos**: SQLite (principal), PostgreSQL (futuro)
- **Testing**: Jest, pytest, supertest
- **Deployment**: Docker, Docker Compose

#### **Patrones de C贸digo Preferidos**
- **TypeScript Strict Mode**: Siempre habilitado
- **Error Boundaries**: Usar en componentes React cr铆ticos
- **API Response Types**: Interfaces tipadas para todas las responses
- **Database Queries**: Context managers para conexiones
- **Logging**: Structured logging con niveles apropiados

#### **Arquitectura del Proyecto**
- **Frontend Port**: 3001 (Ley de Puertos)
- **Backend Port**: 5555 (Ley de Puertos)
- **Database**: SQLite en `data/chipax_data.db` (DB Can贸nica)
- **Modular Structure**: Preferir m贸dulos < 500 l铆neas
- **Type Safety**: Tipado completo en TypeScript y Python

---

###  CONFIGURACIN DE HERRAMIENTAS

#### **Linting y Formatting**
- **ESLint**: Configuraci贸n Next.js + Prettier
- **Flake8**: M谩ximo 88 caracteres por l铆nea
- **Black**: Formatter autom谩tico para Python
- **Prettier**: Formatter para JS/TS/CSS

#### **Testing Requirements**
- **Cobertura m铆nima**: 70% para backend
- **Tests obligatorios**: APIs cr铆ticas, utilidades DB, validaciones
- **Smoke tests**: Ejecutar despu茅s de cambios mayores

#### **Commits y Branches**
- **Commit format**: Conventional commits preferidos
- **Branch naming**: `feature/`, `bugfix/`, `refactor/`
- **PR Requirements**: Tests passing, no lint errors

---

###  CONTEXTO DEL PROYECTO

#### **Estado Actual**
- **Servidor monol铆tico**: server.py en proceso de refactorizaci贸n
- **M贸dulos extra铆dos**: config.py, rate_limiting.py, db_utils_centralized.py, ai_jobs.py
- **Frontend**: Next.js 15 con TypeScript
- **Base de datos**: SQLite con ~50 tablas
- **Contenedores**: Docker Compose para desarrollo

#### **Prioridades de Desarrollo**
1. **FASE 1 COMPLETADA**: Extracci贸n de m贸dulos core de server.py
2. **FASE 2 EN CURSO**: APIs especializadas y servicios
3. **FASE 3 PLANIFICADA**: Servicios de dominio
4. **Testing**: Mantener cobertura > 70%
5. **Performance**: Optimizaci贸n de queries DB

#### **Reglas del Negocio**
- **Ley de Puertos**: Frontend 3001, Backend 5555
- **DB Can贸nica**: Una sola fuente de verdad en SQLite
- **Modularidad**: Archivos < 500 l铆neas
- **Observabilidad**: Prometheus metrics habilitadas

---

###  SUGERENCIAS INTELIGENTES

#### **Auto-Completions Habilitados Para**
- Imports de m贸dulos del proyecto
- Funciones de utilidades comunes
- Patterns de API responses
- Database query patterns
- React component patterns
- Docker commands comunes

#### **Context Awareness**
- Detectar autom谩ticamente el stack tecnol贸gico
- Sugerir imports relevantes al contexto
- Proponer patrones de error handling
- Recomendar optimizaciones de performance

---

* Configuraci贸n optimizada para m谩xima productividad con seguridad apropiada*